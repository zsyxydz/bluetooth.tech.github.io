!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}n(54);var l=n(101),o=a(l),r=n(52),s=i(r),c=n(51),u=i(c),d=n(37),f=i(d),p=n(1),v=i(p),y=n(2),m=n(4),h=i(m);!function(){$("#hubIp").val(v.default.saved.hubIp).triggerHandler("blur"),$("#hubMac").val(v.default.saved.hubMac).triggerHandler("blur")}(),layui.use(["layer","form"],function(){var t=layui.layer,e=layui.form();$("#reboot").click(function(){console.log(h.default.reboot),y.api.reboot(h.default.reboot).done(t.load(2,{time:5e3}))}),e.on("switch(switchScan)",function(t){t.elem.checked?(console.log(v.default.saved),s.default.start({chip:v.default.saved.chip||0},v.default.neverSave.scanSSE.timeOut)):s.default.stop()}),e.on("switch(switchNotifyState)",function(t){t.elem.checked?u.default.start():u.default.stop()}),e.on("switch(switchNotifyMsg)",function(t){t.elem.checked?f.default.start():f.default.stop(0)}),$("#clearNotify").on("click",function(){$(".box .l4 ul").empty()}),o.mainHandle(t,e),o.connectButton(),o.getConnectLists(),o.disConnectDevice(),o.getAllServices()}),layui.use(["element"],function(){layui.element()})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(110),l=i(a),o=n(100),r=!0,s=void 0,c="cassiaSDKTool",u={notifySSE:{status:"closed",es:""},stateSSE:{status:"closed",es:""},scanSSE:{status:"closed",es:"",timeOut:5},scanData:[],length:null},d={_deviceMac:"",_hubMac:"",_hubIp:"",_chip:"0",_commond:""};(0,l.default)(d,{deviceMac:{get:function(){return this._deviceMac},set:function(t){this._deviceMac=t,(0,o.storage)(c,this)}},hubMac:{get:function(){return this._hubMac},set:function(t){this._hubMac=t,(0,o.storage)(c,this)}},hubIp:{get:function(){return this._hubIp},set:function(t){this._hubIp=t,(0,o.storage)(c,this)}},chip:{get:function(){return this._chip},set:function(t){this._chip=t,(0,o.storage)(c,this)}},commond:{get:function(){return this._commond},set:function(t){this._commond=t,(0,o.storage)(c,this)}}}),r&&(r=!1,s=(0,o.readStorage)(c,d));var f={neverSave:u,saved:s};e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(var i in e)t+=t.indexOf("?")===-1?"?":"&",t+=(n?encodeURIComponent(i):i)+"="+(n?encodeURIComponent(e[i]):e[i]);return t}function l(t,e,n,i){var l=(0,m.default)({event:1,chip:0},e),o=a(t,l,!1);h.methodConfig.scan.url=o;var r=new EventSource(o);r.addEventListener("open",function(){return"toClosed"===n.status?(this.close(),void(n.es="")):void(n.es=this)},!1),layui.use("flow",function(){var t=layui.flow,e=10;r.addEventListener("message",function(t){":keep-alive"!==t.data&&(g.default.neverSave.scanData.push(t.data),i(t.data))}),t.load({elem:"#scanLog ul",scrollElem:".layui-tab-content",mb:100,done:function(t,n){var i=g.default.neverSave.scanData;1===t?setTimeout(function(){n("<li>"+i.slice(0,e).join("</li><li>")+"</li>",e<i.length),t++},1e3):(n("<li>"+i.slice((t-1)*e,t*e).join("</li><li>")+"</li>",t*e<=i.length),t++)}})})}function o(t,e){var n=t;return null!==e.qs.chip&&(n=a(t,e.qs,!1)),h.methodConfig.connectDevice.url=n,$.ajax({url:n,type:"POST",data:{timeOut:5e3,type:e.type}})}function r(t){return h.methodConfig.disconnectDevice.url=t,$.ajax({url:t,type:"DELETE"})}function s(t){return h.methodConfig.getConnectList.url=t,$.ajax({url:t,type:"GET"})}function c(t,e){var n=new EventSource(t);return h.methodConfig.getConnectState.url=t,n.addEventListener("open",function(){return console.log("open"),"toClosed"===e.status?(this.close(),console.log("closed"),e.status="closed",void(e.es="")):(e.es=this,void(e.status="open"))},!1),n}function u(t){return $.ajax({url:t,type:"GET"})}function d(t){return h.methodConfig.getAllServices.url=t,$.ajax({url:t,type:"GET"})}function f(t,e){var n=a(t,e,!1);$.ajax({url:n,type:"GET",data:e}).done(function(t){console.log(t)}).fail(function(t){console.error(t)})}function p(t,e){var n=new EventSource(t);return console.log(e),h.methodConfig.notify.url=t,n.addEventListener("open",function(){return"toClosed"===e.status?(this.close(),e.status="closed",void(e.es="")):(console.log("open"),e.es=this,void(e.status="open"))},!1),n}function v(t,e){return h.methodConfig.writeByHandle.url=a(t,e,!1),$.ajax({url:t,type:"GET",data:e})}Object.defineProperty(e,"__esModule",{value:!0}),e.api=void 0;var y=n(38),m=i(y),h=n(3),b=n(1),g=i(b),S={start:l,connectDevice:o,disconnectDevice:r,getConnectList:s,getConnectState:c,reboot:u,getAllServices:d,writeByHnadle:v,readByHandle:f,receiveNotification:p,addURLParam:a};e.api=S},function(t,e){"use strict";function n(t){var e=a[t].methodName,n=a[t].type,i=a[t].url,o="<li>\n\t\t\t\t\t<p><span>方法名</span><span>"+e+"</span><span>"+n+"</span></p>\n\t\t\t\t\t<p><em>URL:</em>"+i+"</p>\n\t\t\t\t</li>";l.append(o)}Object.defineProperty(e,"__esModule",{value:!0});var i={scan:"扫描设备",connectDevice:"连接设备",getConnectList:"已连接备",getAllServices:"发现服务",notify:"接收设备信息",getConnectState:"设备连接状态变化",writeByHandle:"写入指令",disconnectDevice:"断开连接"},a={scan:{type:"GET/SSE",url:"",methodName:i.scan},connectDevice:{type:"POST",methodName:i.connectDevice,url:""},getConnectList:{type:"GET",methodName:i.getConnectList,url:""},getConnectState:{type:"GET/SSE",methodName:i.getConnectState,url:""},disconnectDevice:{type:"DELETE",methodName:i.disconnectDevice,url:""},getAllServices:{type:"GET",methodName:i.getAllServices,utl:""},notify:{type:"GET/SSE",methodName:i.notify,url:""},writeByHandle:{type:"GET",methodName:i.writeByHandle,url:""}},l=$(".log .left .order");e.methodConfig=a,e.showMethod=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t){c.scan="http://"+t+"/gap/nodes/",c.connectDevice="http://"+t+"/gap/nodes/"+s.perMac+"/connection/",c.disconnectDevice="http://"+t+"/gap/nodes/"+s.perMac+"/connection",c.getConnectedDeviceList="http://"+t+"/gap/nodes/?connection_state=connected",c.getConnectState="http://"+t+"/management/nodes/connection-state",c.getAllServices="http://"+t+"/gatt/nodes/"+s.perMac+"/services/characteristics/descriptors",c.readByHandle="http://"+t+"/gatt/nodes/"+s.perMac+"/",c.notifyMsg="http://"+t+"/gatt/nodes/?event=1",c.writeByHandle="http://"+t+"/gatt/nodes/"+s.perMac+"/handle/"+s.handle+"/value/"+s.writeValue,c.reboot="http://"+t+"/cassia/reboot"}Object.defineProperty(e,"__esModule",{value:!0});var l=n(1),o=i(l),r=$("#hubIp"),s={},c={};s.hubIp=r.val().trim(),s.perMac="*deviceMac*",s.handle="*handle*",s.writeValue="*writeValue*",a(s.hubIp),r.on("blur",function(){s.hubIp=this.value.trim(),a(s.hubIp),o.default.saved.hubIp=s.hubIp}),$("#hubMac").on("blur",function(){o.default.saved.hubMac=this.value.trim()}),e.default=c},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=(0,o.default)({before:"",message:"",after:"",class:""},e),i="<li><pre class='"+n.class+"'>"+n.before+n.message+n.after+"</pre></li>";t.append(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.showLog=void 0;var l=n(38),o=i(l);e.showLog=a},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){"use strict";function n(t,e,n,i,a){t.open({type:4,area:["313px","auto"],closeBtn:0,shadeClose:!0,fixed:!1,maxmin:!1,anim:5,tips:[2,"#2F4056"],content:[e(),n],success:i.bind(null,t,a,n)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){t.exports={default:n(55),__esModule:!0}},function(t,e,n){t.exports=!n(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(42),a=n(24);t.exports=function(t){return i(a(t))}},function(t,e,n){var i=n(7),a=n(5),l=n(65),o=n(15),r="prototype",s=function(t,e,n){var c,u,d,f=t&s.F,p=t&s.G,v=t&s.S,y=t&s.P,m=t&s.B,h=t&s.W,b=p?a:a[e]||(a[e]={}),g=b[r],S=p?i:v?i[e]:(i[e]||{})[r];p&&(n=e);for(c in n)u=!f&&S&&void 0!==S[c],u&&c in b||(d=u?S[c]:n[c],b[c]=p&&"function"!=typeof S[c]?n[c]:m&&u?l(d,i):h&&S[c]==d?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[r]=t[r],e}(d):y&&"function"==typeof d?l(Function.call,d):d,y&&((b.virtual||(b.virtual={}))[c]=d,t&s.R&&g&&!g[c]&&o(g,c,d)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(16),a=n(22);t.exports=n(10)?function(t,e,n){return i.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(20),a=n(41),l=n(34),o=Object.defineProperty;e.f=n(10)?Object.defineProperty:function(t,e,n){if(i(t),e=l(e,!0),i(n),a)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(47),a=n(25);t.exports=Object.keys||function(t){return i(t,a)}},function(t,e,n){var i=n(31)("wks"),a=n(23),l=n(7).Symbol,o="function"==typeof l,r=t.exports=function(t){return i[t]||(i[t]=o&&l[t]||(o?l:a)("Symbol."+t))};r.store=i},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(19);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports={}},function(t,e){t.exports=!0},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(16).f,a=n(11),l=n(18)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,l)&&i(t,l,{configurable:!0,value:e})}},function(t,e,n){var i=n(31)("keys"),a=n(23);t.exports=function(t){return i[t]||(i[t]=a(t))}},function(t,e,n){var i=n(7),a="__core-js_shared__",l=i[a]||(i[a]={});t.exports=function(t){return l[t]||(l[t]={})}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(24);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(19);t.exports=function(t,e){if(!i(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!i(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(7),a=n(5),l=n(27),o=n(36),r=n(16).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=l?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||r(e,t,{value:o.f(t)})}},function(t,e,n){e.f=n(18)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),l=i(a),o=n(2),r=n(3),s=n(6),c=n(4),u=i(c),d=n(1),f=i(d),p={};p.start=function(){if(f.default.neverSave.notifySSE.status="toOpen",""===f.default.neverSave.notifySSE.es){var t=o.api.receiveNotification(u.default.notifyMsg,f.default.neverSave.notifySSE),e=$(".l4 ul"),n=$("#notify ul");t.addEventListener("message",function(t){var i=null;":keep-alive"!==t.data?(i=JSON.parse(t.data),(0,s.showLog)(e,{message:"<b>mac:"+i.id+"</b>&nbsp;&nbsp;&nbsp;"+i.value}),(0,s.showLog)(n,{message:(0,l.default)(i,null,2)})):(0,s.showLog)(n,{message:t.data})}),(0,r.showMethod)("notify")}},p.stop=function(){console.log(f.default),f.default.neverSave.notifySSE.status="toClosed",f.default.neverSave.notifySSE.es&&(f.default.neverSave.notifySSE.es.close(),f.default.neverSave.notifySSE.status="closed",f.default.neverSave.notifySSE.es="")},e.default=p},function(t,e,n){t.exports={default:n(57),__esModule:!0}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(19),a=n(7).document,l=i(a)&&i(a.createElement);t.exports=function(t){return l?a.createElement(t):{}}},function(t,e,n){t.exports=!n(10)&&!n(14)(function(){return 7!=Object.defineProperty(n(40)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(39);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var i=n(27),a=n(13),l=n(48),o=n(15),r=n(11),s=n(26),c=n(70),u=n(29),d=n(77),f=n(18)("iterator"),p=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",m="values",h=function(){return this};t.exports=function(t,e,n,b,g,S,w){c(n,e,b);var M,_,x,E=function(t){if(!p&&t in C)return C[t];switch(t){case y:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",j=g==m,L=!1,C=t.prototype,k=C[f]||C[v]||g&&C[g],A=k||E(g),I=g?j?E("entries"):A:void 0,P="Array"==e?C.entries||k:k;if(P&&(x=d(P.call(new t)),x!==Object.prototype&&(u(x,O,!0),i||r(x,f)||o(x,f,h))),j&&k&&k.name!==m&&(L=!0,A=function(){return k.call(this)}),i&&!w||!p&&!L&&C[f]||o(C,f,A),s[e]=A,s[O]=h,g)if(M={values:j?A:E(m),keys:S?A:E(y),entries:I},w)for(_ in M)_ in C||l(C,_,M[_]);else a(a.P+a.F*(p||L),e,M);return M}},function(t,e,n){var i=n(20),a=n(45),l=n(25),o=n(30)("IE_PROTO"),r=function(){},s="prototype",c=function(){var t,e=n(40)("iframe"),i=l.length,a="<",o=">";for(e.style.display="none",n(67).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(a+"script"+o+"document.F=Object"+a+"/script"+o),t.close(),c=t.F;i--;)delete c[s][l[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(r[s]=i(t),n=new r,r[s]=null,n[o]=t):n=c(),void 0===e?n:a(n,e)}},function(t,e,n){var i=n(16),a=n(20),l=n(17);t.exports=n(10)?Object.defineProperties:function(t,e){a(t);for(var n,o=l(e),r=o.length,s=0;r>s;)i.f(t,n=o[s++],e[n]);return t}},function(t,e,n){var i=n(47),a=n(25).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,a)}},function(t,e,n){var i=n(11),a=n(12),l=n(64)(!1),o=n(30)("IE_PROTO");t.exports=function(t,e){var n,r=a(t),s=0,c=[];for(n in r)n!=o&&i(r,n)&&c.push(n);for(;e.length>s;)i(r,n=e[s++])&&(~l(c,n)||c.push(n));return c}},function(t,e,n){t.exports=n(15)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){var i=c.default.connectDevice.replace("*deviceMac*",n),a=$("#connect ul");r.api.connectDevice(i,{qs:{chip:t},type:e}).done(function(t){(0,d.showLog)(a,{before:"mac:"+n+"&nbsp;&nbsp;",message:(0,o.default)(t),class:"success"})}).fail(function(t){(0,d.showLog)(a,{before:"mac:"+n+"&nbsp;&nbsp;",message:(0,o.default)(t),class:"fail"})}).always(function(t){console.log("connect:",t)}),(0,u.showMethod)("connectDevice")}Object.defineProperty(e,"__esModule",{value:!0});var l=n(9),o=i(l),r=n(2),s=n(4),c=i(s),u=n(3),d=n(6);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return"<li data-mac="+t+'>\n\t\t\t\t<div class="layui-form-item">\n\t\t\t\t\t<div class="layui-inline">\n\t\t\t\t\t\t<label class="layui-form-label">mac:</label>\n\t\t\t\t\t\t<div class="layui-input-inline">\n\t\t\t\t\t\t\t<span class="layui-input">'+t+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="layui-inline">\n\t\t\t\t\t\t<label class="layui-form-label">name:</label>\n\t\t\t\t\t\t<div class="layui-input-inline">\n\t\t\t\t\t\t\t<span class="layui-input">'+e+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="layui-form-item">\n\t\t\t\t\t<div class="layui-input-inline">\n\t\t\t\t\t\t<button class="layui-btn" data-mac='+t+' data-action=\'services\'>Serivices</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="layui-input-inline">\n\t\t\t\t\t\t<button class="layui-btn" data-mac='+t+" data-action='disconnect'>disconnect</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"layui-input-item tree\">\n\t\t\t\t\t<ul data-mac="+t+"></ul> \n\t\t\t\t</div>\n\t\t\t</li>"}function l(){var t=$(".l3 ul"),e=$("#connectLists ul"),n=s.api.getConnectList(f.default.getConnectedDeviceList);(0,c.showMethod)("getConnectList"),n.done(function(n){var i="",l=void 0,o=void 0;(0,u.showLog)(e,{message:(0,r.default)(n)}),n.nodes.forEach(function(t,e,n){l=t.id,o=t.name,i+=a(l,o)}),t.html(i),l=null,i=null,o=null})}Object.defineProperty(e,"__esModule",{value:!0}),e.htmlTemp=e.getConnectListAndFiil=void 0;var o=n(9),r=i(o),s=n(2),c=n(3),u=n(6),d=n(4),f=i(d);e.getConnectListAndFiil=l,e.htmlTemp=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=t.connectionState,n=t.handle,i=$(".box .l3 ul.bb1"),a=i.children('li:has(span.layui-input:contains("'+n+'"))');"connected"!==e||a[0]?"disconnected"===e&&a[0]&&a.slideUp("normal",function(){this.parentNode.removeChild(this)}):i.append((0,s.htmlTemp)(n,""))}Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),o=n(3),r=n(6),s=n(50),c=n(4),u=i(c),d=n(1),f=i(d),p={};p.start=function(){if(f.default.neverSave.stateSSE.status="toOpen",""===f.default.neverSave.stateSSE.es){var t=u.default.getConnectState,e=l.api.getConnectState(t,f.default.neverSave.stateSSE),n=$("#connectState ul"),i="";e.addEventListener("message",function(t){(0,r.showLog)(n,{message:t.data}),":keep-alive"!==t.data&&(i=JSON.parse(t.data),a(i))}),(0,o.showMethod)("getConnectState")}},p.stop=function(){f.default.neverSave.stateSSE.status="toClosed",f.default.neverSave.stateSSE.es&&(f.default.neverSave.stateSSE.es.close(),console.log("has closed"),f.default.neverSave.stateSSE.status="closed",f.default.neverSave.stateSSE.es="")},e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){function n(t){if("toClosed"!==s.default.neverSave.scanSSE.status)for(var e in t)t[e].flag>0?t[e].flag--:p.destroy({el:l,mac:e,allItem:a})}function i(t,e){p.add({parentNode:l,mesg:JSON.parse(e),allItem:a,flag:t})}if(""===s.default.neverSave.scanSSE.es){s.default.neverSave.scanSSE.status="toOpen";var a={},l=document.querySelector(".l2 ul.bb1"),r=d.default.scan;l.innerHTML="",s.default.neverSave.scanSSE.timer=null,s.default.neverSave.scanSSE.es=null,o.api.start(r,t,s.default.neverSave.scanSSE,i.bind(null,e)),(0,c.showMethod)("scan"),s.default.neverSave.scanSSE.timer=setInterval(function(){n(a)},1e3)}}function l(){s.default.neverSave.scanSSE.status="toClosed",s.default.neverSave.scanSSE.es&&s.default.neverSave.scanSSE.es.close(),clearInterval(s.default.neverSave.scanSSE.timer),s.default.neverSave.scanSSE.es=""}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=(n(6),n(1)),s=i(r),c=n(3),u=n(4),d=i(u),f={start:a,stop:l},p={};$("#scanLog ul");p.add=function(t){function e(t){function e(t,e){var n=document.createElement("div"),i=document.createElement("label"),a=document.createElement("div"),l=document.createElement("span");return n.className="layui-inline",i.className="layui-form-label",a.className="layui-input-inline",l.className="layui-input",i.innerHTML=t+":",l.innerHTML=e,a.appendChild(l),n.appendChild(i),n.appendChild(a),{divLayuiInline:n,labelLyauiFomrLabel:i,spanLayuiInput:l}}var n=document.createElement("li"),i={li:n},a=void 0,l=void 0,o=0;for(var r in t)a=e(r,t[r]),o%2===0&&(l=document.createElement("div"),l.className="layui-form-item"),l.appendChild(a.divLayuiInline),n.appendChild(l),i[r]=a.spanLayuiInput,o++;return l=document.createElement("div"),l.className="layui-form-item",l.innerHTML='<div class="layui-input-inline">\n\t\t\t\t\t\t\t\t<button class="layui-btn" data-type='+t.type+" data-mac="+t.mac+">connect</button>\n\t\t\t\t\t\t\t</div>",n.appendChild(l),o=null,a=null,l=null,i}var n={mac:t.mesg.bdaddrs[0].bdaddr,name:t.mesg.name,type:t.mesg.bdaddrs[0].bdaddrType,rssi:t.mesg.rssi};t.allItem[n.mac]?("(unknown)"!==n.name&&(t.allItem[n.mac].name.innerHTML=n.name),t.allItem[n.mac].lastUpdate!==t.allItem[n.mac].flag&&t.allItem[n.mac].rssi.innerHTML!==n.rssi&&(t.allItem[n.mac].rssi.innerHTML=n.rssi,t.allItem[n.mac].lastUpdate=t.allItem[n.mac].flag),t.allItem[n.mac].rssi.style.color="#5FB878"):(t.allItem[n.mac]=e(n),t.parentNode.appendChild(t.allItem[n.mac].li),t.allItem[n.mac].rssi.style.color="red"),t.allItem[n.mac].mesg=t.mesg,t.allItem[n.mac].flag=t.flag,t.allItem[n.mac].lastUpdate=t.flag},p.destroy=function(t){t.el.removeChild(t.allItem[t.mac].li),delete t.allItem[t.mac]},e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(113),l=i(a),o=n(112),r=i(o),s="function"==typeof r.default&&"symbol"==typeof l.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};e.default="function"==typeof r.default&&"symbol"===s(l.default)?function(t){return"undefined"==typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":"undefined"==typeof t?"undefined":s(t)}},function(t,e){},function(t,e,n){var i=n(5),a=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},function(t,e,n){n(83),t.exports=n(5).Number.isInteger},function(t,e,n){n(84),t.exports=n(5).Object.assign},function(t,e,n){n(85);var i=n(5).Object;t.exports=function(t,e){return i.defineProperties(t,e)}},function(t,e,n){n(86),t.exports=n(5).Object.keys},function(t,e,n){n(89),n(87),n(90),n(91),t.exports=n(5).Symbol},function(t,e,n){n(88),n(92),t.exports=n(36).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,n){var i=n(12),a=n(81),l=n(80);t.exports=function(t){return function(e,n,o){var r,s=i(e),c=a(s.length),u=l(o,c);if(t&&n!=n){for(;c>u;)if(r=s[u++],r!=r)return!0}else for(;c>u;u++)if((t||u in s)&&s[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var i=n(62);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,a){return t.call(e,n,i,a)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(17),a=n(28),l=n(21);t.exports=function(t){var e=i(t),n=a.f;if(n)for(var o,r=n(t),s=l.f,c=0;r.length>c;)s.call(t,o=r[c++])&&e.push(o);return e}},function(t,e,n){t.exports=n(7).document&&document.documentElement},function(t,e,n){var i=n(39);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(19),a=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&a(t)===t}},function(t,e,n){"use strict";var i=n(44),a=n(22),l=n(29),o={};n(15)(o,n(18)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(o,{next:a(1,n)}),l(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(17),a=n(12);t.exports=function(t,e){for(var n,l=a(t),o=i(l),r=o.length,s=0;r>s;)if(l[n=o[s++]]===e)return n}},function(t,e,n){var i=n(23)("meta"),a=n(19),l=n(11),o=n(16).f,r=0,s=Object.isExtensible||function(){return!0},c=!n(14)(function(){return s(Object.preventExtensions({}))}),u=function(t){o(t,i,{value:{i:"O"+ ++r,w:{}}})},d=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,i)){if(!s(t))return"F";if(!e)return"E";u(t)}return t[i].i},f=function(t,e){if(!l(t,i)){if(!s(t))return!0;if(!e)return!1;u(t)}return t[i].w},p=function(t){return c&&v.NEED&&s(t)&&!l(t,i)&&u(t),t},v=t.exports={KEY:i,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(t,e,n){"use strict";var i=n(17),a=n(28),l=n(21),o=n(33),r=n(42),s=Object.assign;t.exports=!s||n(14)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=i})?function(t,e){for(var n=o(t),s=arguments.length,c=1,u=a.f,d=l.f;s>c;)for(var f,p=r(arguments[c++]),v=u?i(p).concat(u(p)):i(p),y=v.length,m=0;y>m;)d.call(p,f=v[m++])&&(n[f]=p[f]);return n}:s},function(t,e,n){var i=n(21),a=n(22),l=n(12),o=n(34),r=n(11),s=n(41),c=Object.getOwnPropertyDescriptor;e.f=n(10)?c:function(t,e){if(t=l(t),e=o(e,!0),s)try{return c(t,e)}catch(t){}if(r(t,e))return a(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(12),a=n(46).f,l={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],r=function(t){try{return a(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==l.call(t)?r(t):a(i(t))}},function(t,e,n){var i=n(11),a=n(33),l=n(30)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),i(t,l)?t[l]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var i=n(13),a=n(5),l=n(14);t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*l(function(){n(1)}),"Object",o)}},function(t,e,n){var i=n(32),a=n(24);t.exports=function(t){return function(e,n){var l,o,r=String(a(e)),s=i(n),c=r.length;return s<0||s>=c?t?"":void 0:(l=r.charCodeAt(s),l<55296||l>56319||s+1===c||(o=r.charCodeAt(s+1))<56320||o>57343?t?r.charAt(s):l:t?r.slice(s,s+2):(l-55296<<10)+(o-56320)+65536)}}},function(t,e,n){var i=n(32),a=Math.max,l=Math.min;t.exports=function(t,e){return t=i(t),t<0?a(t+e,0):l(t,e)}},function(t,e,n){var i=n(32),a=Math.min;t.exports=function(t){return t>0?a(i(t),9007199254740991):0}},function(t,e,n){"use strict";var i=n(63),a=n(71),l=n(26),o=n(12);t.exports=n(43)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,n):"values"==e?a(0,t[n]):a(0,[n,t[n]])},"values"),l.Arguments=l.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(13);i(i.S,"Number",{isInteger:n(69)})},function(t,e,n){var i=n(13);i(i.S+i.F,"Object",{assign:n(74)})},function(t,e,n){var i=n(13);i(i.S+i.F*!n(10),"Object",{defineProperties:n(45)})},function(t,e,n){var i=n(33),a=n(17);n(78)("keys",function(){return function(t){return a(i(t))}})},function(t,e){},function(t,e,n){"use strict";var i=n(79)(!0);n(43)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var i=n(7),a=n(11),l=n(10),o=n(13),r=n(48),s=n(73).KEY,c=n(14),u=n(31),d=n(29),f=n(23),p=n(18),v=n(36),y=n(35),m=n(72),h=n(66),b=n(68),g=n(20),S=n(12),w=n(34),M=n(22),_=n(44),x=n(76),E=n(75),O=n(16),j=n(17),L=E.f,C=O.f,k=x.f,A=i.Symbol,I=i.JSON,P=I&&I.stringify,$="prototype",T=p("_hidden"),H=p("toPrimitive"),N={}.propertyIsEnumerable,D=u("symbol-registry"),R=u("symbols"),F=u("op-symbols"),B=Object[$],G="function"==typeof A,U=i.QObject,W=!U||!U[$]||!U[$].findChild,V=l&&c(function(){return 7!=_(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=L(B,e);i&&delete B[e],C(t,e,n),i&&t!==B&&C(B,e,i)}:C,J=function(t){var e=R[t]=_(A[$]);return e._k=t,e},q=G&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},z=function(t,e,n){return t===B&&z(F,e,n),g(t),e=w(e,!0),g(n),a(R,e)?(n.enumerable?(a(t,T)&&t[T][e]&&(t[T][e]=!1),n=_(n,{enumerable:M(0,!1)})):(a(t,T)||C(t,T,M(1,{})),t[T][e]=!0),V(t,e,n)):C(t,e,n)},K=function(t,e){g(t);for(var n,i=h(e=S(e)),a=0,l=i.length;l>a;)z(t,n=i[a++],e[n]);return t},Y=function(t,e){return void 0===e?_(t):K(_(t),e)},Q=function(t){var e=N.call(this,t=w(t,!0));return!(this===B&&a(R,t)&&!a(F,t))&&(!(e||!a(this,t)||!a(R,t)||a(this,T)&&this[T][t])||e)},X=function(t,e){if(t=S(t),e=w(e,!0),t!==B||!a(R,e)||a(F,e)){var n=L(t,e);return!n||!a(R,e)||a(t,T)&&t[T][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=k(S(t)),i=[],l=0;n.length>l;)a(R,e=n[l++])||e==T||e==s||i.push(e);return i},tt=function(t){for(var e,n=t===B,i=k(n?F:S(t)),l=[],o=0;i.length>o;)!a(R,e=i[o++])||n&&!a(B,e)||l.push(R[e]);return l};G||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(F,n),a(this,T)&&a(this[T],t)&&(this[T][t]=!1),V(this,t,M(1,n))};return l&&W&&V(B,t,{configurable:!0,set:e}),J(t)},r(A[$],"toString",function(){return this._k}),E.f=X,O.f=z,n(46).f=x.f=Z,n(21).f=Q,n(28).f=tt,l&&!n(27)&&r(B,"propertyIsEnumerable",Q,!0),v.f=function(t){return J(p(t))}),o(o.G+o.W+o.F*!G,{Symbol:A});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var et=j(p.store),nt=0;et.length>nt;)y(et[nt++]);o(o.S+o.F*!G,"Symbol",{for:function(t){return a(D,t+="")?D[t]:D[t]=A(t)},keyFor:function(t){if(q(t))return m(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!G,"Object",{create:Y,defineProperty:z,defineProperties:K,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),I&&o(o.S+o.F*(!G||c(function(){var t=A();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!q(t)){for(var e,n,i=[t],a=1;arguments.length>a;)i.push(arguments[a++]);return e=i[1],"function"==typeof e&&(n=e),!n&&b(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!q(e))return e}),i[1]=e,P.apply(I,i)}}}),A[$][H]||n(15)(A[$],H,A[$].valueOf),d(A,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(t,e,n){n(35)("asyncIterator")},function(t,e,n){n(35)("observable")},function(t,e,n){n(82);for(var i=n(7),a=n(15),l=n(26),o=n(18)("toStringTag"),r=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],s=0;s<5;s++){var c=r[s],u=i[c],d=u&&u.prototype;d&&!d[o]&&a(d,o,c),l[c]=l.Array}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(){var t='<form class="layui-form  connect-tip tip" action="#">\n  <div class="layui-form-item">\n    <label class="layui-form-label">Get connected devices as list：GET</label>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>描述</legend>\n  </fieldset>\n  <div class="layui-form-item layui-form-text">\n    <div class="descriptors connect-des">\n      <p><b>接口URL：</b>调用接口后，此URL会自动生成在下面的”API接口”的窗口中。</p>\n      <p><b>接口描述：</b>此接口是GET请求，调用接口后，蓝牙路由器会将目前连接的设备的列表返回到pc端。</p>\n    </div>\n  </div>\n  <div class="layui-form-item">\n    <div class="layui-input-block">\n      <button class="layui-btn" lay-submit lay-filter="connectList">do</button>\n    </div>\n  </div>\n</form>';return t}function l(t,e,n){function i(t,e,n){$('form.connect-tip button[lay-filter="connectList"]')[0].fn=n.fn,e.on("submit(connectList)",function(e){return e.elem.fn&&e.elem.fn(),t.closeAll("tips"),!1})}e.verify({deviceMac:[/^([0-9a-f]{2}:){5}[0-9a-f]{2}$/gi,"请输入正确的mac地址"],zeroOne:[/^[01]$/,"请输入chip,0或者1"]}),(0,r.default)(t,a,n,i,e),e.render()}Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),r=i(o);e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(){
var t='<form class="layui-form  connect-tip tip" action="#">\n  <div class="layui-form-item">\n    <label class="layui-form-label">Connect a device：GET</label>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>参数</legend>\n  </fieldset>\n  <div class="layui-form-item">\n    <label class="layui-form-label">chip:</label>\n    <div class="layui-input-inline">\n      <input type="text" name="chip"  placeholder="0或者1" lay-verify=\'zeroOne\'  value="'+(r.default.saved.chip?r.default.saved.chip:"")+'" class="layui-input">\n    </div>\n     <div class="layui-form-mid layui-word-aux">(必填)</div>\n  </div>\n  <div class="layui-form-item">\n    <label class="layui-form-label">deviceMac:</label>\n    <div class="layui-input-inline">\n      <input type="text" name="deviceMac"  placeholder="CC:1B:E0:E0:10:C1" value="'+(r.default.saved.deviceMac?r.default.saved.deviceMac:"")+'" lay-verify=\'deviceMac\'  class="layui-input">\n    </div>\n    <div class="layui-form-mid layui-word-aux">(必填)</div>\n  </div>\n  <div class="layui-form-item select">\n    <label class="layui-form-label">type:</label>\n    <div class="layui-inline">\n     <select name="type">\n      <option value="public" '+("public"===r.default.type?"selected":null)+'>public</option>\n      <option value="random" '+("random"===r.default.type?"selected":null)+'>random</option>\n     </select>\n    </div>\n  </div>\n  \n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>描述</legend>\n  </fieldset>\n  <div class="layui-form-item layui-form-text">\n    <div class="descriptors connect-des">\n      <p><b>chip：</b>蓝牙路由器共有两个芯片，芯片0和芯片1，在调用接口时可以通过添加queryString来选择芯片(?chip=0或者?chip=1)，每个芯片的连接上限是11个设备，如果不填此参数，蓝牙路由器会根据连接数量自动匹配芯片。</p>\n      <p><b>deviceMac：</b>要连接的设备的MAC地址。</p>\n      <p><b>type：</b>此参数在body中，是必填项。蓝牙设备的MAC地址分为random和public两种，所以在连接设备时，需要指出设备的广播type，广播type可以从扫描数据中获取。</p>\n    </div>\n  </div>\n  <div class="layui-form-item">\n    <div class="layui-input-block">\n      <button class="layui-btn" lay-submit lay-filter="connect">do</button>\n    </div>\n  </div>\n</form>';return t}function l(t,e,n){function i(t,e){e.on("submit(connect)",function(e){r.default.saved.chip=e.field.chip,r.default.saved.deviceMac=e.field.deviceMac,r.default.type=e.field.type;var n=e.field.deviceMac,i=e.field.type,a=e.field.chip;return(0,c.default)(a,i,n),t.closeAll("tips"),!1})}e.verify({deviceMac:[/^([0-9a-f]{2}:){5}[0-9a-f]{2}$/gi,"请输入正确的mac地址"],zeroOne:[/^[01]$/,"请输入chip,0或者1"]}),(0,d.default)(t,a,n,i,e),e.render()}Object.defineProperty(e,"__esModule",{value:!0}),e.connectTips=void 0;var o=n(1),r=i(o),s=n(49),c=i(s),u=n(8),d=i(u);e.connectTips=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=c.default.connectDevice.replace("*deviceMac*",t),n=$("#disconnectLog ul"),i=r.api.disconnectDevice(e);(0,u.showMethod)("disconnectDevice"),i.done(function(e){(0,d.showLog)(n,{before:"mac:&nbsp;&nbsp;"+t+" disconnect",message:(0,o.default)(e,null,2),class:"success"}),$(".l3 ul li[data-mac='"+t+"']").slideUp("normal",function(){this.remove()})}).fail(function(e){(0,d.showLog)(n,{before:"mac:&nbsp;&nbsp;"+t+" disconnect",message:(0,o.default)(e,null,2),class:"fail"})})}Object.defineProperty(e,"__esModule",{value:!0});var l=n(9),o=i(l),r=n(2),s=n(4),c=i(s),u=n(3),d=n(6);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(){var t='<form class="layui-form  disconnect-tip tip" action="#">\n  <div class="layui-form-item">\n    <label class="layui-form-label">Disconnect a device：DELETE</label>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>参数</legend>\n  </fieldset>\n  <div class="layui-form-item">\n    <label class="layui-form-label">deviceMac:</label>\n    <div class="layui-input-inline">\n      <input type="text" name="deviceMac"  placeholder="CC:1B:E0:E0:10:C1" value="'+(r.default.saved.deviceMac?r.default.saved.deviceMac:"")+'" lay-verify=\'deviceMac\'  class="layui-input">\n    </div>\n    <div class="layui-form-mid layui-word-aux">(必填)</div>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>描述</legend>\n  </fieldset>\n  <div class="layui-form-item layui-form-text">\n    <div class="descriptors connect-des">\n      <p><b>接口URL：</b>调用接口后，此URL会自动生成在下面的”API接口”的窗口中。</p>\n      <p><b>接口描述：</b>此接口是DELETE请求，调用接口后，蓝牙路由器会与指定MAC地址的蓝牙设备断连。</p>\n      <p><b>参数解释：deviceMac：</b>要断连的设备的MAC地址。</p>\n    </div>\n  </div>\n  <div class="layui-form-item">\n    <div class="layui-input-block">\n      <button class="layui-btn" lay-submit lay-filter="bdisconnect">do</button>\n    </div>\n  </div>\n</form>';return t}function l(t,e,n){function i(t,e,n){$('form.disconnect-tip button[lay-filter="bdisconnect"]')[0].fn=n.fn,e.on("submit(bdisconnect)",function(e){var n=r.default.saved.deviceMac=$(".disconnect-tip input").val().trim();return e.elem.fn&&e.elem.fn(n),t.closeAll("tips"),!1})}e.verify({deviceMac:[/^([0-9a-f]{2}:){5}[0-9a-f]{2}$/gi,"请输入正确的mac地址"]}),(0,c.default)(t,a,n,i,e),e.render()}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=i(o),s=n(8),c=i(s);e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){function n(t){(0,s.default)(t).forEach(function(n){if("object"!==(0,o.default)(t[n])&&"uuid"!==n&&"primary"!==n&&"endHandle"!==n){if("startHandle"===n)return void t.children.push({name:"handle:"+t[n]});if("handle"===n)return void t.children.push({name:"handle:"+t[n]});if("properties"!==n)t.children.push({name:n+":"+t[n]});else{var i=(0,u.default)(t[n]);if(t.children.push({name:"properties:"+("<span class='prop-msg'>&nbsp;&nbsp;"+i+"</span>")}),i.indexOf("read")!==-1,i.indexOf("write without response")!==-1&&(t.children.push({name:'write without response:&nbsp;0x\n\t\t\t\t\t\t\t\t\t<span class="layui-form-item">\n\t\t\t\t\t\t\t\t\t\t<span class="layui-inline">\n\t\t\t\t\t\t\t\t\t\t\t<span class="layui-input-inline" style="width: 100px;">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" class="layui-input js'+t.valueHandle+'"  placeholder=\'0100\'>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="layui-form-mid"></span>\n\t\t\t\t\t\t\t\t\t\t\t<button class="layui-btn js-try" lay-submit lay-filter=\'writeWithoutRes\'  data-devicemac='+e+"  data-action='writeWithoutRes' data-handle="+t.valueHandle+">try</button>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>",flag:"writeWithoutRes",valueHandle:t.valueHandle}),t.children.push({name:'<span style="visibility:hidden">write without response:&nbsp;</span>(0x0100)</span>'})),i.indexOf("write with response")!==-1&&(t.children.push({name:'write with response:&nbsp;0x\n\t\t\t\t\t\t\t\t\t<span class="layui-form-item">\n\t\t\t\t\t\t\t\t\t\t<span class="layui-inline">\n\t\t\t\t\t\t\t\t\t\t\t<span class="layui-input-inline" style="width: 100px;">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" class="layui-input js'+t.valueHandle+'"  placeholder=\'0F04\'>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="layui-form-mid"></span>\n\t\t\t\t\t\t\t\t\t\t\t<button class="layui-btn js-try" lay-submit lay-filter=\'writeWithRes\' data-devicemac='+e+" data-action='writeWithRes' data-handle="+t.valueHandle+">try</button>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>",flag:"writeWithRes",valueHandle:t.valueHandle}),t.children.push({name:'<span style="visibility:hidden">write with response:&nbsp;</span>(0x0100)</span>'})),i.indexOf("notify")!==-1){var a=t.descriptors.filter(function(t){return t.uuid.indexOf("2902")!==-1});t.children.push({name:'notify\n\t\t\t\t\t\t\t\t\t<span class="layui-form-item">\n\t\t\t\t\t\t\t\t\t\t<span class="layui-inline">\n\t\t\t\t\t\t\t\t\t\t\t<span class="layui-form-mid"></span>\n\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox"  lay-skin="switch" class=\'js-switch\' data-action=\'notify\' data-devicemac='+e+" data-handle="+(a[0]?a[0].handle:"undefined")+" lay-filter='notify'>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>",flag:"notify",handle:a[0]?a[0].handle:"undefined"})}if(i.indexOf("indicate")!==-1){var l=t.descriptors.filter(function(t){return t.uuid.indexOf("2902")!==-1});t.children.push({name:'indicate\n\t\t\t\t\t\t\t\t\t<span class="layui-form-item">\n\t\t\t\t\t\t\t\t\t\t<span class="layui-inline">\n\t\t\t\t\t\t\t\t\t\t\t<span class="layui-form-mid"></span>\n\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox"  lay-skin="switch" class=\'js-switch\' data-devicemac='+e+" data-action='indicate' data-handle="+l[0].handle+" lay-filter='indicate'>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>",flag:"indicate",handle:l[0].handle})}}}})}var i=[];return t.services.forEach(function(t){i.push(t),t.children=[],n(t),t.children.push({name:"characteristics",children:t.characteristics.map(function(t){return t.children=[],n(t,"c"),0!==t.descriptors.length&&t.children.push({name:"descriptors",children:t.descriptors.map(function(t){return t.children=[],n(t),t.name="uuid:"+t.uuid,t})}),delete t.descriptors,t.name="uuid:"+t.uuid,t})}),delete t.characteristics,t.name="uuid:"+t.uuid}),[{name:"services",children:i}]}Object.defineProperty(e,"__esModule",{value:!0});var l=n(53),o=i(l),r=n(111),s=i(r),c=n(104),u=i(c);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t){layui.use(["tree","form","layer"],function(){var e=layui.form(),n=layui.layer,i=$(".box .l3").find("ul.bb1>li div.tree > ul[data-mac='"+t+"']"),a=v.default.getAllServices.replace("*deviceMac*",t);if(1!==h[t]){if("object"===(0,s.default)(h[t])){if(0!==i.children().length)return;return layui.tree({elem:i,nodes:h[t]}),void setTimeout(function(){e.render()},500)}h[t]=0;var l=c.api.getAllServices(a),r=$("#getAllServices ul");(0,d.showMethod)("getAllServices"),function(t,e,n,i,a,l,r){l.done(function(n){console.log($.extend(!0,{},n)),(0,f.showLog)(r,{message:(0,o.default)(n,null,2),class:"success"}),h[t]=(0,m.default)(n,t),layui.tree({elem:i,nodes:h[t]}),clearTimeout(i.timer),i.timer=setTimeout(function(){var n=$(".l3 ul[data-mac='"+t+"']"),i=void 0;e.render(),n.find("button.js-try").click(function(t){var e=t.target.dataset.handle,a=t.target.dataset.devicemac;i=2===n.find("input.js"+e).length&&"writeWithoutRes"===t.target.dataset.action?n.find("input.js"+e).eq(0).val().trim():2===n.find("input.js"+e).length&&"writeWithRes"===t.target.dataset.action?n.find("input.js"+e).eq(1).val().trim():n.find("input.js"+e).eq(0).val().trim(),(0,u.writeByHnadleAndFill)(t.target,{deviceMac:a,writeValue:i,handle:e})}),e.on("switch(notify)",function(t){var e=t.elem.dataset.handle,n=t.elem.checked?"0100":"0000",i=t.elem.dataset.devicemac;(0,u.writeByHnadleAndFill)(t.elem,{deviceMac:i,writeValue:n,handle:e})}),e.on("switch(indicate)",function(t){var e=t.elem.dataset.handle,n=t.elem.checked?"0200":"0000",i=t.elem.dataset.devicemac;(0,u.writeByHnadleAndFill)(t.elem,{deviceMac:i,writeValue:n,handle:e})})},500)}).fail(function(e){"DISCOVER WRONG"===e.responseText&&n.open({title:"获取设备服务错误",content:t+"未连接!",icon:2}),h[t]=3,(0,f.showLog)(r,{message:(0,o.default)(e,null,2),class:"fail"})})}(t,e,n,i,a,l,r)}})}Object.defineProperty(e,"__esModule",{value:!0}),e.getAllServicesAndFill=void 0;var l=n(9),o=i(l),r=n(53),s=i(r),c=n(2),u=n(108),d=n(3),f=n(6),p=n(4),v=i(p),y=n(97),m=i(y),h={};e.getAllServicesAndFill=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){function i(){var t='<form class="layui-form  getAllServices-tip tip" action="#">\n  <div class="layui-form-item">\n    <label class="layui-form-label">Get all services：GET</label>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>参数</legend>\n  </fieldset>\n  <div class="layui-form-item">\n    <label class="layui-form-label">deviceMac:</label>\n    <div class="layui-input-inline">\n      <input type="text" name="deviceMac"  placeholder="CC:1B:E0:E0:10:C1" value="'+(o.default.saved.deviceMac?o.default.saved.deviceMac:"")+'" lay-verify=\'deviceMac\'  class="layui-input">\n    </div>\n    <div class="layui-form-mid layui-word-aux">(必填)</div>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>描述</legend>\n  </fieldset>\n  <div class="layui-form-item layui-form-text">\n    <div class="descriptors connect-des">\n      <p><b>接口URL：</b>调用接口后，此URL会自动生成在下面的”API接口”的窗口中。</p>\n      <p><b>接口描述：</b>此接口是GET请求，调用接口后，蓝牙路由器会向指定的蓝牙设备请求其服务的树形列表，调用次接口的主要目的是为对蓝牙设备进行读写操作时，获取蓝牙设备的characteristic所对应的valueHandle或者handle。</p>\n      <p><b>参数解释：deviceMac：</b>要请求服务列表的设备的MAC地址。</p>\n    </div>\n  </div>\n  <div class="layui-form-item">\n    <div class="layui-input-block">\n      <button class="layui-btn" lay-submit lay-filter="bdiscoverSer">do</button>\n    </div>\n  </div>\n</form>';return t}function a(t,e,n){$('form.getAllServices-tip button[lay-filter="bdiscoverSer"]')[0].fn=n.fn,e.on("submit(bdiscoverSer)",function(e){return o.default.saved.deviceMac=$(".getAllServices-tip input").val().trim(),e.elem.fn&&e.elem.fn(o.default.saved.deviceMac),t.closeAll("tips"),!1})}e.verify({deviceMac:[/^([0-9a-f]{2}:){5}[0-9a-f]{2}$/gi,"请输入正确的mac地址"],zeroOne:[/^[01]$/,"请输入chip,0或者1"]}),(0,s.default)(t,i,n,a,e),e.render()}Object.defineProperty(e,"__esModule",{value:!0});var l=n(1),o=i(l),r=n(8),s=i(r);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(window.localStorage){var n=window.localStorage;n.setItem(t,(0,c.default)(e))}}function l(t,e){if(!window.localStorage)return e;var n=window.localStorage,i=JSON.parse(n.getItem(t));return(0,r.default)(e,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.readStorage=e.storage=void 0;var o=n(38),r=i(o),s=n(9),c=i(s);e.storage=a,e.readStorage=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){T.on("click",function(n){var i=n.target.id;switch(i){case"bscan":(0,w.default)(t,e,n.target);break;case"bConnect":(0,g.connectTips)(t,e,n.target);break;case"bconnectList":n.target.fn=p.getConnectListAndFiil,(0,_.default)(t,e,n.target);break;case"bdiscoverSer":n.target.fn=v.getAllServicesAndFill,(0,E.default)(t,e,n.target);break;case"bnotify":n.target.start=m.default.start,n.target.stop=m.default.stop,(0,j.default)(t,e,n.target);break;case"bnotifyState":n.target.start=b.default.start,n.target.stop=b.default.stop,(0,C.default)(t,e,n.target);break;case"bwrite":(0,P.default)(t,e,n.target);break;case"bdisconnect":n.target.fn=f.default,(0,A.default)(t,e,n.target)}})}function l(){$(".box .l2").on("click",".layui-btn",function(){var t=this.dataset.mac,e=this.dataset.type;(0,u.default)(null,e,t)})}function o(){H.on("click","[data-action='disconnect']",function(){var t=this.dataset.mac;(0,f.default)(t)})}function r(){H.on("click","button[data-action='services']",function(){var t=this.dataset.mac;(0,v.getAllServicesAndFill)(t)})}function s(){H.on("click",".connectList",function(){(0,p.getConnectListAndFiil)()})}Object.defineProperty(e,"__esModule",{value:!0}),e.getAllServices=e.disConnectDevice=e.getConnectLists=e.connectButton=e.mainHandle=void 0;var c=n(49),u=i(c),d=n(95),f=i(d),p=n(50),v=n(98),y=n(37),m=i(y),h=n(51),b=i(h),g=n(94),S=n(105),w=i(S),M=n(93),_=i(M),x=n(99),E=i(x),O=n(102),j=i(O),L=n(103),C=i(L),k=n(96),A=i(k),I=n(107),P=i(I),T=$(".box .l1"),H=$(".box .l3");e.mainHandle=a,e.connectButton=l,e.getConnectLists=s,e.disConnectDevice=o,e.getAllServices=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(){console.log(r.default.neverSave.notifySSE.status);var t='<form class="layui-form  notifyMsg-tip tip" action="#">\n  <div class="layui-form-item">\n    <label class="layui-form-label">Receive indication &amp; notification：GET/SSE</label>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>Hub通知状态</legend>\n  </fieldset>\n  <div class="layui-form-item">\n    <div class="layui-inline">\n\t\t<label class="layui-form-label" style="width:auto">打开通知</label>\n\t\t<input type="checkbox" lay-skin="switch" lay-filter="switchNotifyMsg1" title="打开通知" '+(r.default.neverSave.notifySSE.status.indexOf("pen")!==-1?"checked":"")+'>\n\t</div>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>描述</legend>\n  </fieldset>\n  <div class="layui-form-item layui-form-text">\n    <div class="descriptors connect-des">\n      <p><b>接口URL：</b>调用接口后，此URL会自动生成在下面的”API接口”的窗口中。</p>\n      <p><b>接口描述：</b>此接口是sse长链接，当打开蓝牙设备的notification/indication后，蓝牙设备会将消息上报到蓝牙路由器，但是如果在pc上希望接收到此消息，还需要调用此接口来建立蓝牙路由器到pc端的数据通路，这样蓝牙路由器才会将收到的蓝牙设备的数据转发到pc端。</p>\n      <p><b>SSE：</b>server-sent events，简称：see。是一种http的长链接，请求需要手动关闭，否则理论上在不报错的情况下会一直进行，每条数据会以“data: ” 开头。在调试中可以直接将sse的url输入在浏览器中进行调用。但是在编程中使用一般的http请求无法请求到数据(一般的http请求都是在请求结束后返回所有的数据)，我们目前提供了iOS/java/nodejs/js/c#等的demo来实现sse的调用，如果在这方面遇到困难可以参考。另外，当调用sse时，最好对该长链接进行监控，以便在长链接出现错误或意外停止后进行重启，或者其他操作。</p>\n    </div>\n  </div>\n  <div class="layui-form-item">\n    <div class="layui-input-block">\n      <button class="layui-btn" lay-submit lay-filter="bnotify">do</button>\n    </div>\n  </div>\n</form>';return t}function l(t,e,n){function i(t,e,n){$('form.notifyMsg-tip button[lay-filter="bnotify"]')[0].start=n.start,$('form.notifyMsg-tip button[lay-filter="bnotify"]')[0].stop=n.stop,e.on("submit(bnotify)",function(n){return $('form.notifyMsg-tip input[type="checkbox"]').prop("checked")?""===r.default.neverSave.notifySSE.es&&"toOpen"!==r.default.neverSave.notifySSE.status&&(r.default.neverSave.notifySSE.status="toOpen",$('.l4 input[type="checkbox"]').prop("checked",!0),e.render("checkbox"),n.elem.start&&n.elem.start(),t.closeAll("tips")):($('.l4 input[type="checkbox"]').prop("checked",!1),e.render("checkbox"),n.elem.stop&&n.elem.stop()),t.closeAll("tips"),!1})}(0,c.default)(t,a,n,i,e),e.render()}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=i(o),s=n(8),c=i(s);e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(){console.log(r.default.neverSave.stateSSE.status);var t='<form class="layui-form  notifyState-tip tip" action="#">\n  <div class="layui-form-item">\n    <label class="layui-form-label">Receive indication &amp; notification：GET/SSE</label>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>Hub通知状态</legend>\n  </fieldset>\n  <div class="layui-form-item">\n    <div class="layui-inline">\n\t\t<label class="layui-form-label" style="width:auto">打开通知</label>\n\t\t<input type="checkbox" lay-skin="switch" lay-filter="" title="打开通知" '+(r.default.neverSave.stateSSE.status.indexOf("pen")!==-1?"checked":"")+'>\n\t</div>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>描述</legend>\n  </fieldset>\n  <div class="layui-form-item layui-form-text">\n    <div class="descriptors connect-des">\n      <p><b>接口URL：</b>调用接口后，此URL会自动生成在下面的”API接口”的窗口中。</p>\n      <p><b>接口描述：</b>此接口是sse长链接，当蓝牙路由器上的蓝牙设备的连接状态发生改变时（连接成功或者发生断连），会通过此接口将消息通知到pc端。</p>\n      <p><b>SSE：</b>server-sent events，简称：see。是一种http的长链接，请求需要手动关闭，否则理论上在不报错的情况下会一直进行，每条数据会以“data: ” 开头。在调试中可以直接将sse的url输入在浏览器中进行调用。但是在编程中使用一般的http请求无法请求到数据(一般的http请求都是在请求结束后返回所有的数据)，我们目前提供了iOS/java/nodejs/js/c#等的demo来实现sse的调用，如果在这方面遇到困难可以参考。另外，当调用sse时，最好对该长链接进行监控，以便在长链接出现错误或意外停止后进行重启，或者其他操作。</p>\n    </div>\n  </div>\n  <div class="layui-form-item">\n    <div class="layui-input-block">\n      <button class="layui-btn" lay-submit lay-filter="bnotifyState">do</button>\n    </div>\n  </div>\n</form>';return t}function l(t,e,n){function i(t,e,n){$('form.notifyState-tip button[lay-filter="bnotifyState"]')[0].start=n.start,$('form.notifyState-tip button[lay-filter="bnotifyState"]')[0].stop=n.stop,e.on("submit(bnotifyState)",function(n){return $('form.notifyState-tip input[type="checkbox"]').prop("checked")?""===r.default.neverSave.stateSSE.es&&"toOpen"!==r.default.neverSave.stateSSE.status&&(r.default.neverSave.stateSSE.status="toOpen",$('.l3 .layui-form>.layui-form-item  input[type="checkbox"]').prop("checked",!0),e.render("checkbox"),n.elem.start&&n.elem.start(),t.closeAll("tips")):($('.l3 .layui-form>.layui-form-item  input[type="checkbox"]').prop("checked",!1),e.render("checkbox"),n.elem.stop&&n.elem.stop()),t.closeAll("tips"),!1})}(0,u.default)(t,a,n,i,e),e.render()}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=i(o),s=n(37),c=(i(s),n(8)),u=i(c);e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(109),l=i(a),o=function(t){var e=[],n={1:"broadcasts",2:"read",4:"write without response",8:"write with response",16:"notify",32:"indicate",64:"authen",128:"extended"};if(!(0,l.default)(t))return"properties value must be integer";for(var i in n)t&i&&e.push(n[i]);return e.join(",")};e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(){var t='<form class="layui-form  scan-tip tip" action="#">\n  <div class="layui-form-item">\n    <label class="layui-form-label">Scan：GET/SSE</label>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>参数</legend>\n  </fieldset>\n  <div class="layui-form-item">\n    <label class="layui-form-label">chip:</label>\n    <div class="layui-input-inline">\n      <input type="text" name="chip"  value='+(""!==r.default.saved.chip?r.default.saved.chip:"0")+' placeholder="0或者1" lay-verify=\'zeroOrOne\'  class="layui-input">\n    </div>\n     <div class="layui-form-mid layui-word-aux">(选填)</div>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>描述</legend>\n  </fieldset>\n  <div class="layui-form-item layui-form-text">\n    <div class="descriptors scan-des">\n      <p><b>接口URL：</b>调用接口后，此URL会自动生成在下面的”API接口”的窗口中</p>\n      <p><b>接口描述：</b>此接口是sse长链接调用接口后，蓝牙路由器会扫描周边的设备,并将蓝牙设备的MAC地址(bdaddr)、广播type（bdaddrType）、广播报数据（adData/scanData）、设备名称（name）、信号强度（rssi）等信息以http response的形式返回（原始数据见“http response”窗口。</p>\n      <p><b> 参数解释：chip：</b>蓝牙路由器共有两个芯片，芯片0和芯片1，在调用接口时可以通过添加queryString来选择芯片(?chip=0或者?chip=1)，如果不填,会默认用芯片0扫描，芯片0扫描距离会优于芯片1，也建议一般情况下使用芯片0扫描。</p>\n      <p><b>SSE：</b>server-sent events，简称：see。是一种http的长链接，请求需要手动关闭，否则理论上在不报错的情况下会一直进行，每条数据会以“data: ” 开头。在调试中可以直接将sse的url输入在浏览器中进行调用。但是在编程中使用一般的http请求无法请求到数据(一般的http请求都是在请求结束后返回所有的数据)，我们目前提供了iOS/java/nodejs/js/c#等的demo来实现sse的调用，如果在这方面遇到困难可以参考。另外，当调用sse时，最好对该长链接进行监控，以便在长链接出现错误或意外停止后进行重启，或者其他操作。</p>\n    \n    </div>\n  </div>\n  \n  <div class="layui-form-item">\n    <div class="layui-input-block">\n      <button class="layui-btn" lay-submit lay-filter="scan">do</button>\n    </div>\n  </div>\n</form>';return t}function l(t,e,n){function i(t,e){e.on("submit(scan)",function(n){return r.default.saved.chip=n.field.chip,$("#scanSwitch").prop("checked",!0),c.default.start({chip:r.default.saved.chip||0},r.default.timeOut),e.render("checkbox"),t.closeAll("tips"),!1})}e.verify({zeroOrOne:function(t){if("0"!==t&&"1"!==t&&""!==t)return"必须是0或者1"}}),(0,d.default)(t,a,n,i,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=i(o),s=n(52),c=i(s),u=n(8),d=i(u);e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=this,i=void 0,a=void 0,l=void 0,s=void 0,f=void 0,p=void 0,v=void 0,y=void 0;t.forEach(function(t,m,h){function b(t,n){console.log("url",t),console.log(new Date),p=r.api.writeByHnadle(t,n?null:{option:"cmd"}).done(function(t){(0,d.showLog)($("#writeValueLog"),{message:e+":"+(0,o.default)(t),class:"success"})}).fail(function(t){(0,d.showLog)($("#writeValueLog"),{message:e+":"+(0,o.default)(t,null,2),class:"fail"})}).always(function(){(0,u.showMethod)("writeByHandle")})}f=null,l=null,y=t.split(","),i=y[0].split(":")[0].trim(),a=y[0].split(":")[1].trim(),y[1].indexOf("interval")!==-1?(l=parseInt(y[1].split(":")[1],10),s=y[2]):(s=y[1],f=y[2]),s=s&&parseInt(s.trim(),10),f=f&&parseInt(f.trim(),10),v=c.default.writeByHandle.replace(/\*((deviceMac)|(handle)|(writeValue))\*/g,function(t,n,l){switch(t){case"*deviceMac*":return e;case"*handle*":return i;case"*writeValue*":return a}}),l?!function(){setInterval(b.bind(this,v,s),l)}():f?!function(){setTimeout(b.bind(this,v,s),f)}():b.call(n,v,s)})}Object.defineProperty(e,"__esModule",{value:!0});var l=n(9),o=i(l),r=n(2),s=n(4),c=i(s),u=n(3),d=n(6);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(){var t='<form class="layui-form  write-tip tip" action="#">\n  <div class="layui-form-item">\n    <label class="layui-form-label">Write by handle：GET</label>\n  </div>\n  <fieldset class="layui-elem-field layui-field-title">\n    <legend>参数</legend>\n  </fieldset>\n  <div class="layui-form-item">\n    <label class="layui-form-label" >deviceMac:</label>\n    <div class="layui-input-inline">\n      <input type="text" name="deviceMac"  placeholder="CC:1B:E0:E0:10:C1" value="'+(r.default.saved.deviceMac?r.default.saved.deviceMac:"")+'" lay-verify=\'deviceMac\'  class="layui-input">\n    </div>\n    <div class="layui-form-mid layui-word-aux">(必填)</div>\n  </div>\n   <div class="layui-form-item">\n    <label class="layui-form-label" style="width:auto">handle & value</label>\n    <div class="layui-form-mid layui-word-aux">(必填)</div>\n    <div class="">\n    <textarea placeholder="25:55AA101E\n27:55AA00FF"  class="layui-textarea" lay-verify="valueHandleArr">'+(r.default.saved.commond?r.default.saved.commond:"")+'</textarea>\n    </div>\n  </div>\n\n<fieldset class="layui-elem-field layui-field-title">\n  <legend>描述</legend>\n</fieldset>\n<div class="layui-form-item layui-form-text">\n  <div class="descriptors connect-des">\n    <p><b>接口URL：</b>调用接口后，此URL会自动生成在下面的”API接口”的窗口中。</p>\n    <p><b>接口描述：</b>本接口是负责与设备通讯的主要接口，具体负责向蓝牙设备写入指令以及打开蓝牙设备的notification/indication，下面会具体讲解两个功能分别如何实现。</p>\n    <p><b>1、对蓝牙设备写入指令：</b>当需要往蓝牙设备指定的characteristic写入指令时，先调用“发现服务”的接口，当返回蓝牙设备服务信息的树形列表后，寻找指定的characteristic所对应的valueHandle（characteristic内包含handle、valueHandle、properties、descriptors等属性），然后调用此接口时，handle对应的值是characteristic的valueHandle，value对应的值是需要写入的指令内容（将指令的每个byte顺序拼在一起写成一个字符串）。</p>\n    <p><b>2、打开蓝牙设备的notification/indication：</b>当需要接收蓝牙设备发来的数据时，需要先打开蓝牙设备的notification或者indication（打开的过程在本质上也是对蓝牙设备下发的一个指令），当需要打开指定characteristic的notification或者indication时，也是先调用“发现服务”的方法，找到指定的characteristic所对应的descriptors，打开descriptors，找到uuid包含“00002902”所对应的handle，然后调用此接口，接口中的handle就是上面descriptor的handle，如果是打开notification，value对应的是“0100”，如果是打开indication，value对应的是“0200”，如果是关闭notification/indication，value对应的是“0000”。</p>\n    <p><b>参数解释： deviceMac：</b>要写入指令的设备的MAC地址。</p>\n    <p><b>handle：</b>通过“发现服务接口”所找到的characteristic所对应的valueHandle或者handle。</p>\n    <p><b>value：</b>要写入的指令的值，或者“0100”（打开notification）、“0200”（打开indication）、“0000”（关闭notification和indication）。</p>\n    <p><b>handle & value输入格式</b>\n    <p>单条指令格式 handle:value1,type</p>\n    <p>handle为要写入的handle如20</p>\n    <p>value1 为要写入的值（十六进制）</p>\n    <p>type为写入类型，0代表write without response，1代表write with response</p>\n    <p>多条语句之间用回车键换行</p>\n  </div>\n</div>\n<div class="layui-form-item">\n  <div class="layui-input-block">\n    <button class="layui-btn" lay-submit lay-filter="write">do</button>\n  </div>\n</div>\n</form>';return t}function l(t,e,n){function i(t,e){e.on("submit(write)",function(e){var n=$("form.write-tip textarea").val();r.default.saved.commond=n;var i=n.split("\n").filter(function(t){return t.trim()}),a=$("form.write-tip input").val();return r.default.saved.deviceMac=a,(0,c.default)(i,a),t.closeAll("tips"),!1})}e.verify({valueHandleArr:function(t){var e=t.split("\n").map(function(t){return t.trim()}),n="";return e=e.filter(function(t){return t}),0===e.length?"请输入正确的指令":(e.forEach(function(t,e){t.indexOf("interval")>-1?/^[\u0030-\u0039]+\:[\u0030-\u0039\u0041-\u0046]+\,interval\:[\u0030-\u0039]+\,[\u0030-\u0039]+$/gi.test(t.trim())||(n+="第"+(e+1)+"条指令错误</br>"):/^[\u0030-\u0039]+\:[\u0030-\u0039\u0041-\u0046]+\,[\u0030-\u0039](\,[\u0030-\u0039]+)?$/gi.test(t.trim())||(n+="第"+(e+1)+"条指令错误</br>")}),n?n:void 0)},deviceMac:function(t){if(!/^([0-9a-f]{2}:){5}[0-9a-f]{2}$/gi.test(t))return"请输入正确的MAC地址"}}),(0,d.default)(t,a,n,i,e),e.render()}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=i(o),s=n(106),c=i(s),u=n(8),d=i(u);e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.writeByHnadleAndFill=void 0;var a=n(9),l=i(a),o=n(2),r=n(4),s=i(r),c=n(3),u=n(6),d=function(t,e){var n=e.deviceMac,i=e.writeValue,a=e.handle,r=void 0,d=void 0,f=t.dataset.action;r=s.default.writeByHandle.replace(/\*((deviceMac)|(handle)|(writeValue))\*/g,function(t,e,l){switch(t){case"*deviceMac*":return n;case"*handle*":return a;case"*writeValue*":return i}}),"writeWithRes"===f?d=o.api.writeByHnadle(r,null):"writeWithoutRes"===f?d=o.api.writeByHnadle(r,{option:"cmd"}):"notify"===f?d=o.api.writeByHnadle(r,null):"indicate"===f&&(d=o.api.writeByHnadle(r,null)),(0,c.showMethod)("writeByHandle"),d.done(function(t){(0,u.showLog)($("#writeValueLog"),{message:n+":"+(0,l.default)(t),class:"success"})}).fail(function(t){(0,u.showLog)($("#writeValueLog"),{message:n+":"+(0,l.default)(t,null,2),class:"fail"})})};e.writeByHnadleAndFill=d},function(t,e,n){t.exports={default:n(56),__esModule:!0}},function(t,e,n){t.exports={default:n(58),__esModule:!0}},function(t,e,n){t.exports={default:n(59),__esModule:!0}},function(t,e,n){t.exports={default:n(60),__esModule:!0}},function(t,e,n){t.exports={default:n(61),__esModule:!0}}]);